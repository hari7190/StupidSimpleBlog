<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Arrays.Stream</title>

    <!--Support libs-->
    <!--<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"-->
            <!--integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"-->
            <!--crossorigin="anonymous"></script>-->

    <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
            integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
            crossorigin="anonymous"></script>

    <!--Bootstrap libs-->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
          crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
            integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
            crossorigin="anonymous"></script>

    <!--Custom CSS-->
    <link rel="stylesheet" href="resources/css/customStyle.css">

    <!--Highlight.js-->
    <link rel="stylesheet" href="resources/css/styles/monokai-sublime.css">
    <script src="resources/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="resources/js/custom.js"></script>

    <link rel="icon" href="resources/images/favicon.ico">

</head>

<body>

<nav class="navbar sticky-top navbar-light bg-light">
    <!--Logo-->
    <a class="navbar-brand" href="/" >
       <span>[</span> Arrays.stream <span>]</span>
    </a>

    <!--Toggle-->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
            aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="post-current-projects.html">Current Projects</a></li><li class="nav-item"><a class="nav-link" href="post-about-me.html">About me</a></li><li class="nav-item"><a class="nav-link" href="index.html">Home</a></li><li class="nav-item"><a class="nav-link" href="post-interesting-reads.html">Interesting articles</a></li>
        </ul>
    </div>
</nav>
<div class="container-fluid">
    <div class="clearfix">&nbsp;</div>

<div class="container justify">
    <h3>Voice Control for TV</h3>

    <p>
        What better to do when your little baby puts your TV remote in a glass of water.
    </p>

    <h4>Overview</h4>
    <p>
        This is a super simple implementation using Google speech APIs and a Roku TV. You can
        use any language. I am using Python today. My objective was to control my Roku TV. I actually
        tried capturing network traffic from my TV Remote App to TV to find the commands. An easier
        and better way to do is reading Roku documentation !! They explained it pretty well there.
    </p>

    <h5>Environment</h5>
    <p>
        <ul>
            <li>Create a environment of Python 3.6 with Anaconda.</li>
            <li>Brew install Portaudio. (Security aspects TBD)</li>
            <li>Then Pip install pyaudio.</li>
            <li>Get speech_recognition and requests lib (if you are making requests that way)</li>
        </ul>
    </p>

    <h5>Logic</h5>
    <p>
        <ul>
            <li>Setup variables for sampling rate, chunk size and mic name. I used following values.
                Sampling rate : 44100  <br>
                Chunk Size : 3096<br>
                I was using built in mic so name was 'Built-in Microphone'.<br>
                You can find the name using either : system_profiler SPAudioDataType or<br>
                system_profiler SPUSBDataType to find usb audio devices like dedicated mics.
            </li>
            <li>
                Put out a console message indicating program is ready to listen.
            </li>
            <li>
                Sample the input and use speech recognition library to reach out to Google
                to get it processed and convert that to text.
            </li>
            <li>
                Pick up the resulting text and look for what you want in there. I looked for
                if starting with 'roku' and ending with one of the commands like 'play'.
            </li>
            <li>
                After this its pretty much basic if-else logic and logging. Then use requests
                library to make a http post call to TV according to text. It will be like<br>
                $ curl -d '' http://192.168.XXX.X:8060/keypress/XXXXX
            </li>
        </ul>
    </p>

    <p>
        <h5>Code</h5>
        <a href="https://github.com/hari7190/VoiceControlledRokuTv" class="gitHubLink">
            GitHub Repo here. <span class="text-danger">(Quick dirty code. Clean up TBD.)</span>
        </a>
    </p>

    <p>
        <h5>Path forward</h5>
        <ul>
            <li>Deploy this into a RaspberryPi.</li>
            <li>Make it offline. Now it uses Google Speech API. Since there are only a few commands, it should be easy
                to setup a model and teach it. Deploy that in one of the home servers for Pi to talk to.
            </li>
        </ul>
    </p>
</div>
    </div>
    <div class="clearfix">&nbsp;</div>
    <footer class="footer">
        <div class="container text-center">
            <span class="text-muted">&copy; 2010 - 2020</span>
        </div>
    </footer>
</body>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46567984-4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-46567984-4');
    </script>
</html>